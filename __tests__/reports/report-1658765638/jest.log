
> sd-0x-project-delivery-app@1.0.0 test:dev
> NODE_ENV=development npm run jest -i --forceExit --verbose --config=./jest.config.js

npm verb cli /home/humberto/.nvm/versions/node/v16.15.1/bin/node /home/humberto/.nvm/versions/node/v16.15.1/bin/npm
npm info using npm@8.13.1
npm info using node@v16.15.1
npm timing npm:load:whichnode Completed in 0ms
npm timing config:load:defaults Completed in 1ms
npm timing config:load:file:/home/humberto/.nvm/versions/node/v16.15.1/lib/node_modules/npm/npmrc Completed in 0ms
npm timing config:load:builtin Completed in 0ms
npm timing config:load:cli Completed in 2ms
npm timing config:load:env Completed in 1ms
npm timing config:load:file:/home/humberto/Projetos/sd-016-a-project-delivery-app/.npmrc Completed in 0ms
npm timing config:load:project Completed in 6ms
npm timing config:load:file:/home/humberto/.npmrc Completed in 0ms
npm timing config:load:user Completed in 0ms
npm timing config:load:file:/home/humberto/.nvm/versions/node/v16.15.1/etc/npmrc Completed in 0ms
npm timing config:load:global Completed in 0ms
npm timing config:load:validate Completed in 1ms
npm timing config:load:credentials Completed in 1ms
npm timing config:load:setEnvs Completed in 1ms
npm timing config:load Completed in 14ms
npm timing npm:load:configload Completed in 14ms
npm timing npm:load:mkdirpcache Completed in 3ms
npm timing npm:load:mkdirplogs Completed in 1ms
npm verb title npm run jest 03cus
npm verb argv "run" "jest" "--include-workspace-root" "--forceExit" "--loglevel" "verbose" "--config" "./jest.config.js" "03cus"
npm timing npm:load:setTitle Completed in 1ms
npm timing config:load:flatten Completed in 4ms
npm timing npm:load:display Completed in 8ms
npm verb logfile logs-max:10 dir:/home/humberto/.npm/_logs
npm verb logfile /home/humberto/.npm/_logs/2022-07-25T16_13_59_263Z-debug-0.log
npm timing npm:load:logFile Completed in 5ms
npm timing npm:load:timers Completed in 0ms
npm timing npm:load:configScope Completed in 0ms
npm timing npm:load Completed in 33ms

> sd-0x-project-delivery-app@1.0.0 jest
> ./node_modules/.bin/jest

● Multiple configurations found:
    * /home/humberto/Projetos/sd-016-a-project-delivery-app/jest.config.js
    * `jest` key in /home/humberto/Projetos/sd-016-a-project-delivery-app/package.json

  Implicit config resolution does not allow multiple configuration files.
  Either remove unused config files or select one explicitly with `--config`.

  Configuration Documentation:
  https://jestjs.io/docs/configuration.html

  console.log
    Amostragem de itens utilizada no teste:
    `15 - Desenvolva a tela de produtos do cliente de forma que o preço total esteja correto após a adição de itens aleatórios`
    Preço total: 91,54

      at showCurrentCart (actions/customer/showCurrentCart.js:2:11)

  console.log
    ┌─────────┬───────────┬────────────────────────────┬──────────┬───────────┬──────────┐
    │ (index) │ productId │            name            │ quantity │ unitPrice │ subTotal │
    ├─────────┼───────────┼────────────────────────────┼──────────┼───────────┼──────────┤
    │    0    │     1     │     'Skol Lata 250ml'      │    4     │  '2,20'   │  '8,80'  │
    │    1    │     2     │      'Heineken 600ml'      │    3     │  '7,50'   │ '22,50'  │
    │    2    │     5     │        'Skol 269ml'        │    1     │  '2,19'   │  '2,19'  │
    │    3    │     6     │ 'Skol Beats Senses 313ml'  │    4     │  '4,49'   │ '17,96'  │
    │    4    │     7     │       'Becks 330ml'        │    3     │  '4,99'   │ '14,97'  │
    │    5    │     8     │ 'Brahma Duplo Malte 350ml' │    4     │  '2,79'   │ '11,16'  │
    │    6    │    11     │   'Stella Artois 275ml'    │    4     │  '3,49'   │ '13,96'  │
    └─────────┴───────────┴────────────────────────────┴──────────┴───────────┴──────────┘

      at showCurrentCart (actions/customer/showCurrentCart.js:8:11)

  console.log
    
    Rodando novo arquivo de teste com as configurações:
     {
      file: '03customer_products.test.js',
      startedAt: '25/07/2022 13:14:01',
      environment: 'development',
      database: {
        restore: false,
        host: 'localhost',
        port: '3306',
        user: 'root',
        password: 'password',
        defaultSuffix: '-dev',
        defaultDB: 'delivery-app-dev'
      },
      puppeteer: {
        timeout: 10000,
        snapshots: './__tests__/reports/report-1658765638'
      },
      frontEndHost: 'http://localhost:3000'
    }

      at ../config/setupTest.js:23:13

  console.log
    Testando o requisito:
    `16 - Desenvolva a tela de produtos do cliente de forma que haja um botão de carrinho que redirecionará para a tela de checkout caso itens sejam adicionados > O avaliador testará a existência de um botão de carrinho com um valor total válido e que seja capaz de nos direcionar a tela de checkout`

      at Object.<anonymous> (../config/setupTest.js:60:11)

  console.log
    Amostragem de itens utilizada no teste:
    `16 - Desenvolva a tela de produtos do cliente de forma que haja um botão de carrinho que redirecionará para a tela de checkout caso itens sejam adicionados > O avaliador testará a existência de um botão de carrinho com um valor total válido e que seja capaz de nos direcionar a tela de checkout`
    Preço total: 65,93

      at showCurrentCart (actions/customer/showCurrentCart.js:2:11)

  console.log
    ┌─────────┬───────────┬────────────────────────────┬──────────┬───────────┬──────────┐
    │ (index) │ productId │            name            │ quantity │ unitPrice │ subTotal │
    ├─────────┼───────────┼────────────────────────────┼──────────┼───────────┼──────────┤
    │    0    │     1     │     'Skol Lata 250ml'      │    4     │  '2,20'   │  '8,80'  │
    │    1    │     2     │      'Heineken 600ml'      │    4     │  '7,50'   │ '30,00'  │
    │    2    │     5     │        'Skol 269ml'        │    2     │  '2,19'   │  '4,38'  │
    │    3    │     7     │       'Becks 330ml'        │    4     │  '4,99'   │ '19,96'  │
    │    4    │     8     │ 'Brahma Duplo Malte 350ml' │    1     │  '2,79'   │  '2,79'  │
    └─────────┴───────────┴────────────────────────────┴──────────┴───────────┴──────────┘

      at showCurrentCart (actions/customer/showCurrentCart.js:8:11)

  console.log
    o produto  Skol Lata 250ml 4 1

      at Object.validateProductsTotalPrice (actions/customer/validateProductsTotalPrice.js:56:13)

  console.log
    o produto  Heineken 600ml 4 2

      at Object.validateProductsTotalPrice (actions/customer/validateProductsTotalPrice.js:56:13)

  console.log
    o produto  Skol 269ml 2 5

      at Object.validateProductsTotalPrice (actions/customer/validateProductsTotalPrice.js:56:13)

  console.log
    o produto  Becks 330ml 4 7

      at Object.validateProductsTotalPrice (actions/customer/validateProductsTotalPrice.js:56:13)

  console.log
    
    Arquivo "03customer_products.test.js" encerrado em: 25/07/2022 13:14:15

      at ../config/setupTest.js:44:13
          at runMicrotasks (<anonymous>)

FAIL __tests__/end-to-end/03customer_products.test.js (15.546 s)
  11 - Crie uma tela de produtos do cliente contendo uma barra de navegação - navbar - que servirá também para demais telas das pessoas usuárias
    ○ skipped O avaliador testará a existência dos data-testids referentes ao navbar
  12 - Desenvolva a tela de produtos do cliente criando os demais elementos com os data-testids disponíveis no protótipo
    ○ skipped O avaliador testará os data-testids referentes aos card de cada produto
  13 - Desenvolva a tela de produtos do cliente de forma que ela pressuponha dados válidos da pessoa usuária armazenados no localStorage
    ○ skipped O avaliador testará se o local storage contém os dados da pessoa usuária
    ○ skipped O avaliador testará se o nome do usuário, contido no local storage, também está na navbar
    ○ skipped O avaliador testará se o local storage contém um token válido
    ○ skipped O avaliador testará se o logout limpa os dados da pessoa usuária local storage
  14 - Desenvolva a tela de produtos do cliente de forma que os cards de todos os produtos pré-cadastrados contenham os valores corretos
    ○ skipped O avaliador testará se os dados de cada card condizem com os dados esperados
  15 - Desenvolva a tela de produtos do cliente de forma que o preço total esteja correto após a adição de itens aleatórios
    ○ skipped O avaliador testará se adição do item: `{"productId":11,"name":"Stella Artois 275ml","quantity":4,"unitPrice":"3,49","subTotal":"13,96"}`, também altera sua quantidade
    ○ skipped O avaliador testará se após a adição do item: `{"productId":11,"name":"Stella Artois 275ml","quantity":4,"unitPrice":"3,49","subTotal":"13,96"}`, a remoção não resultará em quantidades negativas
    ○ skipped O avaliador testará se definição manual do item: `{"productId":11,"name":"Stella Artois 275ml","quantity":4,"unitPrice":"3,49","subTotal":"13,96"}`, retornará o valor total correto
    ○ skipped O avaliador testará o fluxo completo de adição de itens, validando o valor total de produtos
  16 - Desenvolva a tela de produtos do cliente de forma que haja um botão de carrinho que redirecionará para a tela de checkout caso itens sejam adicionados
    ✕ O avaliador testará a existência de um botão de carrinho com um valor total válido e que seja capaz de nos direcionar a tela de checkout (14735 ms)

  ● 16 - Desenvolva a tela de produtos do cliente de forma que haja um botão de carrinho que redirecionará para a tela de checkout caso itens sejam adicionados › O avaliador testará a existência de um botão de carrinho com um valor total válido e que seja capaz de nos direcionar a tela de checkout

    snapShotId: 1658765641147

    Não foi possível trazer o valor do elemento de referência 'input[data-testid^='customer_products__input-card-quantity-'][data-testid$='-8']':
    "Error: failed to find element matching selector "input[data-testid^='customer_products__input-card-quantity-'][data-testid$='-8']""

      48 |     });
      49 |
    > 50 |     await expect(page).toGetValueFromElement(
         |                        ^
      51 |       customerProductsPage.input.card.quantity +
      52 |         `[data-testid$='-${productId}']`,
      53 |       String(quantity)

      at Object.validateProductsTotalPrice (actions/customer/validateProductsTotalPrice.js:50:24)
      at Object.<anonymous> (03customer_products.test.js:257:7)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 11 skipped, 12 total
Snapshots:   0 total
Time:        15.615 s
Ran all test suites matching /03cus/i.
npm timing command:run Completed in 16743ms
npm verb exit 1
npm timing npm Completed in 16782ms
npm verb code 1
